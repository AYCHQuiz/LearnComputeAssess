---
output:
  html_document: default
  pdf_document: default
---
## [DRAFT] Carpentries Pre- and Post-Workshop Assessment Results
June 2018

```{r setup, include=FALSE}
library(tidyverse)
library(knitr)
library(DBI)
library(ggmap)
library(likert)
library(mapproj)
library(RColorBrewer)
library(srvyr)
library(beeswarm)
library(NPS)
library(broom)
library(assertr)
library(viridis)
library(patchwork)
opts_chunk$set(echo = FALSE,
               message = FALSE,
               warning = FALSE)
opts_chunk$set(fig.path='figures/', fig.width = 10,  fig.retina = 2) #puts all figures in figures folder
```

```{r}
# Function that makes a table of counts and percentages
# @françois please help with creating a different function if this isn't the best way
# to do tally's and percentages
tally_and_perc <- function(df, colname, na.rm = FALSE){
  quo_colname <- enquo(colname)

  df %>% 
    group_by(!!quo_colname) %>% 
    tally() %>% 
    filter(if_else(rep(na.rm, nrow(.)),
                  !is.na(!!quo_colname),
                  as.logical(rep(1, nrow(.))))) %>% 
    mutate(`%` = round(n / sum(n) * 100, 1)) 
}
```

```{r}
# function to compute number of non-NA responses to a question
# @françois do we need this function? 
n_responses_to_the_question <- function(df, from_colname, to_colname) {

  quo_from_colname <- enquo(from_colname)
  quo_to_colname <- enquo(to_colname)

  rowsums <-
df %>%
  select(UQ(quo_from_colname):UQ(quo_to_colname)) %>%
  # check that each row has a value for at least one col
  # convert to numeric, if NA, then put a zero, otherwise 1
  map_df(., ~ifelse(is.na(.x), 0, 1)) %>%
  # sum to see if any rows have no reponses
  rowSums()

# for all behaviors
idx <- ifelse(rowsums == 0, FALSE, TRUE)
sum(idx)
}
```

```{r load-dc-data}
# Load DC pre and post-workshop data
# Data Carpentry Pre-Workshop Data
dcpredata <- readr::read_csv("data/180511_dcpre.csv")

# Data Carpentry Post-Workshop Data
dcpostdata <- readr::read_csv("data/180511_dcpost.csv")
```

```{r load-swc-data}
# Load SWC pre and post-workshop data
# Software Carpentry Pre-Workshop Data
swcpredata <- readr::read_csv("data/180521_swcpre.csv")

# Software Carpentry Post-Workshop Data
swcpostdata <- readr::read_csv("data/180521_swcpost.csv")
```

# Overview

```{r}
# In this section we will include:
# number of workshops
# number of learners
# time period covered
# general outline of the report
```

```{r}
## number of learners
n_learners_pre_dc <- nrow(dcpredata)
n_learners_post_dc <- nrow(dcpostdata)
n_learners_pre_swc <- nrow(swcpredata)
n_learners_post_swc <- nrow(swcpostdata)
```

```{r}
## time period covered
all_dates <- c(dcpredata$Date, dcpostdata$Date,
               swcpredata$Date, swcpostdata$Date)
all_dates <- as.Date(all_dates, format = "%m/%d/%Y")
min_date <- min(all_dates)
max_date <- max(all_dates)
```

This report covers the period from `r format(as.Date(min_date,format="%B %d, %Y"))` to `r format(as.Date(max_date, format="%B %d, %Y"))`.


```{r}
## general outline of the report
```

This is an overview of the number of learners attending Data Carpentry and Software Carpentry workshops. `r n_learners_pre_dc` learners have attended Data Carpentry workshops, and `r n_learners_pre_swc` have attended Software Carpentry workshops. 

Learners were asked how likely they are to recommend this workshop to a friend or colleague using the [Net Promoter Score](https://en.wikipedia.org/wiki/Net_Promoter). The scoring for this question based on a 0 to 100 scale. Respondents scoring from 0 to 64 are labeled *Detractors*, and are believed to be less likely to recommend a workshop. Those who respond with a score of 85 to 100 are called *Promoters*, and are considered likely to recommend a workshop. Respondents between 65 and 84 are labeled *Passives*, and their behavior falls in the middle of Promoters and Detractors. 

# Motivation for Attending Carpentries Workshops

```{r}
# In this section we will include:
# Why are you attending this workshop (SWC, DC)
# Satisfaction with current data management practices (DC)
# Programming usage (DC)
# How did you find out about this workshop? (SWC, DC)
```

```{r}
# Why are you attending this workshop?
# Data Carpentry Responses are in columns 'WhyAttending' through 'Column29'
WhyAttending <- 
dcpredata %>%
  select(`WhyAttending`:`Column29`) %>% 
  gather(col, 
         WhyAttending) %>% 
  tally_and_perc(WhyAttending, 
                 na.rm = TRUE) %>% 
  arrange(desc(n)) %>% 
  rename(`Why are you attending? Check all that apply.` = WhyAttending)

kable(WhyAttending, format = 'markdown', row.names = NA, col.names = c ("Why learners attend Data Carpentry workshops", "n", "%"))
```

```{r}
# Why are you attending this workshop?
# Software Carpentry Responses are in columns 'WhyAttending' through 'Column7'
WhyAttending <- 
swcpredata %>%
  select(WhyAttending:Column7) %>% 
  gather(col, 
         WhyAttending) %>% 
  tally_and_perc(WhyAttending, 
                 na.rm = TRUE) %>% 
  arrange(desc(n)) %>% 
  rename(`Why are you attending? Check all that apply.` = WhyAttending)
kable(WhyAttending, format = 'markdown', row.names = NA, col.names = c ("Why learners attend Software Carpentry Workshops", "n", "%"))
```

```{r}
# Satisfaction with current data management practices 
# Data Carpentry
satisfaction_levels <- c("Very unsatisfied", "Unsatisfied", "Neutral", "Satisfied", "Very satisfied", "Not sure", "Not applicable")

Satisfaction <- dcpredata %>%
    select(`CurrentSatisfaction`) %>% 
    gather(col, 
           Satisfaction) %>% 
    tally_and_perc(Satisfaction, 
                   na.rm = TRUE) %>% 
    rename(`CurrentSatisfaction` = Satisfaction) %>%
    mutate(CurrentSatisfaction = factor(CurrentSatisfaction, levels = satisfaction_levels)) %>%
    arrange(CurrentSatisfaction)


kable(Satisfaction, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry Learners satisfaction with current data management practices", "n", "%"))
```

```{r}
# Programming usage 
# Data Carpentry
usage_levels <- c("Never", "Less than once per year",
                  "Several times per year",
                  "Monthly", "Weekly", "Daily")

Programming <- dcpredata %>%
    select(`CurrentProgramming`) %>% 
    gather(col, Programming) %>% 
    tally_and_perc(Programming, na.rm = TRUE) %>%
    mutate(Programming = factor(Programming, levels = usage_levels)) %>%
    arrange(Programming) %>% 
    rename(`Current Programming Usage` = Programming)

kable(Programming, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry Learners current programming usage", "n", "%"))
```

```{r}
# How did you find out about this workshop? 
# Data Carpentry Responses are in columns 'Exposure-Workshop' through 'Column31'
Exposure <- 
dcpredata %>%
  select(`Exposure`:`Column35`) %>% 
  gather(col, 
         Exposure) %>% 
  tally_and_perc(Exposure, 
                 na.rm = TRUE) %>% 
  arrange(desc(n)) %>% 
  rename(`Exposure` = Exposure)

kable(Exposure, format = 'markdown', row.names = NA, col.names = c ("How respondents find out about Data Carpentry workshops", "n", "%"))
```

```{r}
# How did you find out about this workshop? 
# Software Carpentry Responses are in columns 'Exposure' through 'Column21'
Exposure <- 
swcpredata %>%
  select(Exposure:Column21) %>% 
  gather(col, 
         Exposure) %>% 
  tally_and_perc(Exposure, 
                 na.rm = TRUE) %>% 
  arrange(desc(n)) %>% 
  rename(`Exposure` = Exposure)

kable(Exposure, format = 'markdown', row.names = NA, col.names = c ("How respondents find out about Software Carpentry workshops", "n", "%"))
```

# Workshop Environment

```{r}
# In this section we will include:
# Environment (SWC/DC)
# Perception of instructors and helpers (SWC/DC)
# Applicability (DC)
# How much information was new??? (SWC)
# Accessibility (DC)
```

```{r}
# Environment
# Data Carpentry: I felt comfortable learning in this workshop environment
comfortable = c("Strongly disagree", "Disagree", "Neutral", "Agree", "Strongly agree")
comfortable = factor(comfortable)

dcpostdata$Comfortable = factor(dcpostdata$Comfortable, levels = comfortable)

dcpostdata_comfortable_tally <- 
  dcpostdata %>% 
  group_by(Comfortable) %>% 
  tally() %>%
  filter(!is.na(Comfortable)) 
```

```{r dc_post_workshop_comfortable_environment}
# Data Carpentry plot for workshop environment
ggplot(dcpostdata_comfortable_tally, 
       aes(Comfortable, y = 100 * (n/sum(n)),
           n)) +
  geom_bar(stat = "identity", fill="darkcyan") +
  geom_text(aes(label=n), size= 4, vjust=-0.25) +
  scale_x_discrete(labels = function(x) lapply(strwrap(x, width = 10, simplify = FALSE), paste, collapse="\n")) +
  theme_classic() +
  xlab("Level of Agreement") +
  ylab("% Respondents") +
  ggtitle("Data Carpentry Respondents felt comfortable learning \nin their workshop environment") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_classic(base_size = 14)
```

```{r}
# Environment
# Software Carpentry: The overall atmosphere of the workshop was welcoming
atmosphere = c("Strongly Disagree", "Disagree", "Neither Agree nor Disagree", "Agree", "Strongly Agree")
atmosphere = factor(atmosphere)

swcpostdata$Atmosphere = factor(swcpostdata$Atmosphere, levels = atmosphere)

swcpostdata_atmosphere_tally <- 
  swcpostdata %>% 
  group_by(Atmosphere) %>% 
  tally() %>%
  filter(!is.na(Atmosphere))
```

```{r swc_post_workshop_environment}
# Software Carpentry plot for workshop environment
ggplot(swcpostdata_atmosphere_tally, 
       aes(Atmosphere, y = 100 * (n/sum(n)),
           n)) +
  geom_bar(stat = "identity", fill="darkcyan") +
  geom_text(aes(label=n), size= 4, vjust=-0.25) +
  scale_x_discrete(labels = function(x) lapply(strwrap(x, width = 10, simplify = FALSE), paste, collapse="\n")) +
  theme_classic() +
  xlab("Level of Agreement") +
  ylab("% Respondents") +
  ggtitle("Software Carpentry Respondents felt the workshop \natmosphere was welcoming") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_classic(base_size = 14)
```

Data Carpentry respondents were asked to rate their level of agreement with several statements regarding their instructor's knowledge, instructional method, and enthusiasm. Their responses are in the figure below, and axis labels corresponding to the statements are as follows:

+ __Instructors Knowledge__: The instructors were knowledgeable about the material being taught.
+ __Instructors Interacting__: I felt comfortable interacting with the instructors. 
+ __Instructors Enthusiastic__: The instructors were enthusiastic about the workshop.
+ __Instructors Clear Answers__: I was able to get clear answers to my questions from the instructors. 

```{r}
# Perception of instructors and helpers
# Data Carpentry
# Subsetting a portion of the Likert items from InstructorsClearAnswers to InstructorsKnowledgeable
myvars <- c("InstructorsClearAnswers", "InstructorsEnthusiastic", "InstructorsInteracting", "InstructorsKnowledgeable")
newdata <- dcpostdata[myvars]

cols_with_Agree <- map_lgl(newdata, ~`%in%`("Agree", .x))
newdata_agree <-  newdata[ , cols_with_Agree]

levels = c("Strongly disagree",
           "Disagree",
           "Neutral",
           "Agree",
           "Strongly agree")

newdata_agree_likert <- likert(data.frame(lapply(newdata_agree, factor, levels, ordered=TRUE)))

newdata_agree_likert$results$Item <-  gsub("([A-Z])"," \\1",
                                           newdata_agree_likert$results$Item)

names(newdata_agree_likert$items) <-  gsub("([A-Z])"," \\1",
                                           names(newdata_agree_likert$items))
                                                                                                         
```

```{r dcpost_perception_instructors_heat}					
## Data Carpentry
## Heatmap for Data Carpentry perception of instructors and helpers
title <- "Perception of Data Carpentry Instructors"
plot(newdata_agree_likert, type =c("heat"), panel.arrange = NULL, panel.strip.color = "darkcyan", legend.position = "bottom") + ggtitle(title)
```


Software Carpentry respondents were asked to rate how they felt instructors and helpers worked as a team based on the following criteria:

+ __Considerate__: Instructors/Helpers were considerate.
+ __Enthusiastic__: Instructors/Helpers were enthusiastic. 
+ __Clear Answers__: Instructors/Helpers gave clear answers to your questions. 
+ __Communicators__: Instructors/Helpers were good communicators.    
  
The two Likert plots below provide an analysis of respondent answers.

```{r}
# Software Carpentry: Perception of SWC workshop instructors/helpers
 ordered_often <-
  c("Never", "Rarely", "Sometimes", "Often", "All of the time")

 likert_cols_often_Inst <- 
 swcpostdata %>% 
   select(grep("Instructors", names(.))) %>% 
   mutate_if(is.character, as.factor) %>% 
   mutate_all(funs(fct_relevel(., ordered_often))) %>% 
   filter_all(all_vars(!is.na(.))) 
   
 names(likert_cols_often_Inst) <- 
  gsub("Instructors", "", names(likert_cols_often_Inst))
  
 lc_often_inst <- likert(data.frame(likert_cols_often_Inst))
```

```{r swc_instructors_perception}
# Perception of instructors and helpers
# Software Carpentry Instructors Plot
 plot(lc_often_inst) +
  ggtitle("Perception of Software Carpentry Instructors") + 
 guides(fill = guide_legend(nrow = 2)) # wraps legend
```

```{r}
# Perception of instructors and helpers 
# Software Carpentry: Helpers
 likert_cols_often_h <- 
 swcpostdata %>% 
   select(grep("Helpers", names(.))) %>% 
   mutate_if(is.character, as.factor) %>% 
   mutate_all(funs(fct_relevel(., ordered_often))) %>% 
   filter_all(all_vars(!is.na(.))) 
   
 names(likert_cols_often_h) <- 
  gsub("Helpers", "", names(likert_cols_often_h))
  
 lc_often_h <- likert(data.frame(likert_cols_often_h))
```

```{r swc_helpers_perception}
# Perception of instructors and helpers 
# Software Carpentry: Helpers Plot
 plot(lc_often_h) +
  ggtitle("Perception of Software Carpentry Helpers") + 
 guides(fill = guide_legend(nrow = 2)) # wraps legend
```

```{r}
# Applicability 
# Data Carpentry: I can immediately apply what I learned at this workshop
apply = c("Strongly disagree", "Disagree", "Neutral", "Agree", "Strongly agree")
apply = factor(apply)

dcpostdata$ImmediatelyApply = factor(dcpostdata$ImmediatelyApply, levels = apply)

dcpostdata_apply_tally <- 
  dcpostdata %>% 
  group_by(ImmediatelyApply) %>% 
  tally_and_perc(ImmediatelyApply) %>%
  filter(!is.na(ImmediatelyApply)) 

#kable(dcpostdata_apply_tally, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry Respondents Can Immediately Apply Skills Learned", "n", "%"))
```

```{r dc_post_workshop_immediately_apply}
# Data Carpentry plot for Immediately Apply what I learned
ggplot(dcpostdata_apply_tally, 
       aes(`ImmediatelyApply`, y = 100 * (n/sum(n)),
           n)) +
  geom_bar(stat = "identity", fill="darkcyan") +
  geom_text(aes(label=n), size= 4, vjust=-0.25) +
  scale_x_discrete(labels = function(x) lapply(strwrap(x, width = 10, simplify = FALSE), paste, collapse="\n")) +
  theme_classic() +
  xlab("Level of Agreement") +
  ylab("% Respondents") +
  ggtitle("Data Carpentry respondents can immediately apply \nwhat they learned at the workshop") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_classic(base_size = 14)
```

```{r}
# How much information was new??? 
# Software Carpentry: How much information presented at the SWC workshop was new.
newinfo = c("None of it", "Some of it", "About half of it", "Most of it", "All of it")
newinfo = factor(newinfo)

swcpostdata$NewInformation = factor(swcpostdata$NewInformation, levels = newinfo)

swcpostdata_newinfo_tally <- 
  swcpostdata %>% 
  group_by(NewInformation) %>% 
  tally_and_perc(NewInformation) %>%
  filter(!is.na(NewInformation))
```

```{r swc_new_information}
# Software Carpentry plot for new information
ggplot(swcpostdata_newinfo_tally, 
       aes(NewInformation, 
           y = `%`,
           n)) +
  geom_bar(stat = "identity", 
           fill="darkcyan") +
  geom_text(aes(label=n), 
            size= 4,
            nudge_y = 3) +
  scale_x_discrete(labels = function(x) lapply(strwrap(x, 
                                                       width = 10, 
                                                       simplify = FALSE), 
                                               paste, collapse="\n")) +
  theme_classic() +
  xlab("How Much Information Was New?") +
  ylab("% Respondents") +
  ggtitle("Software Carpentry Respondents Learned \nMostly New Information") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_classic(base_size = 14)
# How do I get the answer choices to show in the correct order?
```

```{r}
# Accessibility 
# Data Carpentry: Were there any accessibility issues that affected your ability 
# to participate in this workshop?
issues <- 
dcpostdata %>%
  select(AccessibilityIssues) %>% 
  gather(col, 
         AccessibilityIssues) %>% 
  tally_and_perc(AccessibilityIssues, 
                 na.rm = TRUE) %>% 
  arrange(desc(n)) %>% 
  rename(`Accessibility Issues` = AccessibilityIssues)

kable(issues, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry Respondents Having Accessibility Issues", "n", "%"))
```


# Workshop Type

```{r}
# In this section we will include:
# Workshop topics (DC)
# Language covered (DC, SWC)
```

```{r}
# Workshop topics
# Data Carpentry: Which workshop are you attending?
workshop = c("Ecology", "Genomics", "Geospatial", "Reproducible Research", "Social Sciences", "I don't know.")
workshop = factor(workshop)

dcpostdata$Workshop = factor(dcpostdata$Workshop, levels = workshop)

dcpostdata_workshop_tally <- 
  dcpostdata %>% 
  group_by(Workshop) %>% 
  tally_and_perc(Workshop) %>%
  filter(!is.na(Workshop))
  #kable(dcpostdata_workshop_tally, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry Workshop Attending", "n", "%"))
```

```{r dc_post_workshop_attended}
# Data Carpentry: Plot for which workshop are you attending?
ggplot(dcpostdata_workshop_tally, 
       aes(`Workshop`, y = 100 * (n/sum(n)),
           n)) +
  geom_bar(stat = "identity", fill="darkcyan") +
  geom_text(aes(label=n), size= 4, vjust=-0.25) +
  scale_x_discrete(labels = function(x) lapply(strwrap(x, width = 10, simplify = FALSE), paste, collapse="\n")) +
  theme_classic() +
  xlab("Workshop Attended") +
  ylab("% Respondents") +
  ggtitle("Marjority of Data Carpentry Respondents by \nAttend Ecology Workshops") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_classic(base_size = 14)
```

```{r}
# Language covered 
# Data Carpentry: Which programming language is being covered?
ProgrammingLanguage <- 
dcpredata %>%
  select(`ProgrammingLanguageCovered`) %>% 
  gather(col, 
         ProgrammingLanguage) %>% 
  tally_and_perc(ProgrammingLanguage, 
                 na.rm = TRUE) %>% 
  arrange(desc(n)) %>% 
  rename(`Which language is being covered?` = ProgrammingLanguage)

kable(ProgrammingLanguage, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry: Language Covered in Workshops", "n", "%"))

# I want these to show in this order: R, Python, I don't know/I don't remember, Neither
```


# Effect of Workshops on Learners Self-Reported Perspectives: Skills & Confidence

Learners were asked to rate their level of agreement with the following statements related to Data Carpentry's workshop goals and learning objectives. The figure below provides a visual representation of their responses, comparing them before the workshop and after the workshop. Axis labels and the corresponding question are as follows:  

+ __Write Program__: I can write a small program/script/macro to solve a problem in my own work. 
+ __Search Online__: I know how to search for answers to my technical questions online.
+ __Raw Data__: Having access to the original, raw data is important to be able to repeat an analysis.
+ __Programming Efficient__: Using a programming language (like R or Python) can make me more efficient at working with data.
+ __Programming Confident__: I am confident in my ability to make use of programming software to work with data.
+ __Overcome Problem__: While working on a programming project, if I get stuck, I can find ways of overcoming the problem.
+ __Analyses Easier__: Using a programming language (like R or Python) can make my analyses easier to reproduce. 
 
```{r}
# In this section we will include:
# Perspectives of self-reported skills and confidence (SWC/DC)
```

```{r dc_prepost_comparison}
# Data Carpentry
# Ability to perform various computing tasks before and after completing the workshop
# Paried analysis plot to compare DC pre scores with post scores
prep_paired_data <- . %>%
    select(UniqueID, `RawData`:`ProgrammingEfficient`) %>%
    filter(!is.na(UniqueID)) %>%
    gather(skill, feeling, -UniqueID) %>%
    mutate(feeling_score = case_when(
               feeling == "Strongly disagree" ~ 1,
               feeling == "Disagree"          ~ 2,
               feeling == "Neutral"           ~ 3,
               feeling == "Agree"             ~ 4, 
               feeling == "Strongly agree"    ~ 5,
               is.na(feeling)                 ~ NA_real_, 
               TRUE                           ~ 999
           )) %>%
    assert(in_set(NA, 1, 2, 3, 4, 5), feeling_score)


pre_paired <- dcpredata %>%
    prep_paired_data %>%
    rename_at(vars(-UniqueID, -skill), ~ paste0("pre_", .))
    
post_paired <- dcpostdata %>%
    prep_paired_data %>%
    rename_at(vars(-UniqueID, -skill), ~ paste0("post_", .))

paired_data <- inner_join(pre_paired, post_paired, by = c("UniqueID", "skill"))


paired_data %>%
    select(UniqueID, skill,
           pre_feeling_score,
           post_feeling_score) %>%
    gather(score, type, -UniqueID, -skill) %>%
    mutate(skill = gsub("([A-Z])", " \\1", skill)) %>%
    group_by(skill, score) %>%
    summarize(
        mean = mean(type, na.rm = TRUE),
        sd = sd(type, na.rm = TRUE)
    ) %>% 
    ggplot(aes(x = skill, y = mean, color = score)) +
    geom_point(size=5) +
    coord_flip() +
    ylim(c(0, 5)) +
    theme_minimal() +
    scale_color_viridis(breaks = c("pre_feeling_score", "post_feeling_score"),
                        labels = c("Pre-workshop Score",
                                   "Post-workshop Score"), 
                        end = .7, discrete=TRUE) +
    labs(title = "Pre and Post Comparison of Skills and Perception") +
    theme(text = element_text(size = 16))

```

```{r, fig.height=16}
paired_data %>%
    mutate(diff_score = post_feeling_score- pre_feeling_score) %>%
    filter(!is.na(diff_score)) %>% 
    mutate(diff_score = factor(diff_score)) %>%
    mutate(skill = gsub("([a-z])([A-Z])", "\\1 \\2", skill)) %>%
    count(skill, diff_score) %>%
    group_by(skill) %>%
    mutate(total = sum(n),
           prop = n/total) %>% 
    ggplot(aes(x = diff_score, y = prop, fill = diff_score))+
    geom_col() +
    theme_minimal() +
    facet_grid(skill ~ .) +
    labs(title = "Distribution of the change in score before and after workshop") +
    scale_fill_viridis(name = "score difference", discrete = TRUE) +
    theme(legend.position = "top")

```



```{r}
# Data Carpentry paired analysis table to compare DC pre scores with post scores
t_test_results <- paired_data %>%
    group_by(skill) %>%
    nest() %>% 
    mutate(t_test_res = purrr::map(data, function(x) {
        t.test(x$pre_feeling_score, x$post_feeling_score, paired = TRUE,
               alt = "less") %>%
            broom::tidy()
    })) %>%
    unnest(t_test_res)

t_test <- paired_data %>%
    group_by(skill) %>%
    summarize(
        mean_pre_feeling = mean(pre_feeling_score, na.rm = TRUE),
        n_pre = sum(!is.na(pre_feeling_score)),
        sd_pre_feeling = sd(pre_feeling_score, na.rm = TRUE),
        mean_post_feeling = mean(post_feeling_score, na.rm = TRUE),
        n_post = sum(!is.na(post_feeling_score)),
        sd_post_feeling = sd(post_feeling_score, na.rm = TRUE)
    ) %>%
    left_join(t_test_results, by = "skill")

kable(select(t_test, skill, ends_with("feeling"), starts_with("n"), 
             p.value))
 
```

```{r}
# Data Carpentry pre-workshop neutral centered graph code
ordered_agree <-
   c("Strongly disagree",
   "Disagree",
   "Neutral",
   "Agree",
   "Strongly agree")

likert_cols <- 
    dcpredata %>% 
    select(which(map_lgl(dcpredata, ~`%in%`("Agree", .x)))) %>% 
    mutate_if(is.character, as.factor) %>% 
    mutate_all(funs(fct_relevel(., ordered_agree))) %>% 
    filter_all(all_vars(!is.na(.)))

lc <- likert(data.frame(likert_cols))
```

```{r dc_pre_perception_likert}
# Data Carpentry pre-workshop neutral centered graph
lc <- likert(data.frame(likert_cols))
title <- "Data Carpentry Respondents: Pre-Workshop Perception of Tools"
theme_update(plot.title = element_text(hjust = 0.5))

likert_pre <- plot(lc) +
    ggtitle(title)+ 
    guides(fill = guide_legend(nrow = 2)) # wraps legend

## Double check the plot with a table:
xx <- 
    likert_cols %>% 
    gather(key, value) %>% 
    group_by(key, value) %>% 
    tally() %>% 
    mutate(perc = round(n / sum(n) * 100, 1)) %>% 
    select(-n) %>% 
    spread(key, perc) %>% 
    slice(match(ordered_agree,
                value))
``` 

```{r}
# Data Carpentry post-workshop neutral centered graph code
ordered_agree <-
   c("Strongly disagree",
   "Disagree",
   "Neutral",
   "Agree",
   "Strongly agree")

likert_cols <- 
    dcpostdata %>%
    select(which(map_lgl(dcpostdata, ~`%in%`("Agree", .x)))) %>%
    select(-matches("Instructor"), -matches("Comfortable"),
           -matches("WorkWithData"), -matches("Immediately")) %>%
    mutate_if(is.character, as.factor) %>% 
    mutate_all(funs(fct_relevel(., ordered_agree))) %>% 
    filter_all(all_vars(!is.na(.)))

```

```{r dc_post_perception_likert}
# Data Carpentry post-workshop neutral centered graph
lc <- likert(data.frame(likert_cols))

lc$results$Item <-  gsub("([a-z])([A-Z])", "\\1 \\2",
                         lc$results$Item)

names(lc$items) <-  gsub("([a-z])([A-Z])", "\\1 \\2",
                         names(lc$items))


title <- "Data Carpentry Respondents: Post-Workshop Perception of Tools"
theme_update(plot.title = element_text(hjust = 0.5))

likert_post <- plot(lc) +
    ggtitle(title)+ 
    guides(fill = guide_legend(nrow = 2)) # wraps legend


## Double check the plot with a table:
xx <- 
    likert_cols %>% 
    gather(key, value) %>% 
    group_by(key, value) %>% 
    tally() %>% 
    mutate(perc = round(n / sum(n) * 100, 1)) %>% 
    select(-n) %>% 
    spread(key, perc) %>% 
    slice(match(ordered_agree,
                value))

```


```{r dc_pre_post_likert, fig.height=16}

(likert_pre + theme(legend.position="none"))  +
    likert_post +
    plot_layout(ncol=1)

```

Software Carpentry Respondets were asked to tell us about their experience with these topics before the workshop:

+ R
+ Unix Shell
+ SQL
+ Python
+ Version Control with Git

```{r}
# Software Carpentry
ordered_little <-
  c("Little or no knowledge of topic",
    "Some knowledge of topic",        
    "Extensive knowledge of topic")  # yours doesn't match the data

likert_cols_little <- 
 swcpostdata %>% 
   select(which(map_lgl(swcpostdata, ~`%in%`("Little or no knowledge of topic", .x)))) %>% 
   mutate_if(is.character, as.factor) %>% 
   mutate_all(funs(fct_relevel(., ordered_little))) %>% 
  filter_all(all_vars(!is.na(.))) 

# To relabel the y-axis, remove the '-Pre like this:"

names(likert_cols_little) <- gsub("-Pre", "", names(likert_cols_little) )

lc_little <- likert(data.frame(likert_cols_little))
```

```{r swc_pre_knowledge}
plot(lc_little) +
  ggtitle("Software Carpentry Self-Reported Knowledge of Tools Covered Pre-Workshop") + 
guides(fill = guide_legend(nrow = 2)) # wraps legend

# Double check the plot with a table:
xx <- 
likert_cols_little %>% 
  gather(key, value) %>% 
  group_by(key, value) %>% 
  tally() %>% 
  mutate(perc = round(n / sum(n) * 100, 1)) %>% 
  select(-n) %>% 
  spread(key, perc) %>% 
  slice(match(ordered_little,
              value))
```


```{r}
# Software Carpentry
# Pre/Post plots for knowledge and perception of tools covered
# Because the pre- and post- columns are quite different, we
# cannot put them on the same plot. So let's do two plots then stack them up
# Use grid.arrange(), nest(), and map() to combine the pre/post plots
  
  knowledge_pre <-
    c(
    "Little or no knowledge of topic",
    "Some knowledge of topic",
    "Extensive knowledge of topic"
    )

knowledge_post <- 
  c("No increase in my knowledge", 
    "Knowledge increased slightly", 
    "Knowledge increased a little", 
    "Knowledge increased a great deal")

# Compute for all tools.

# Before the workshop
pre_knowledge <- 
swcpostdata %>%
  select(contains("Pre")) %>% 
  gather() %>% 
  filter(value %in% knowledge_pre) %>% 
  nest(-key) %>% 
  mutate(tallies = purrr::map(data, ~tally_and_perc(.x, value))) %>% 
  unnest(tallies) %>% 
  mutate(key = gsub("Pre", "", key))

# After the workshop
post_knowledge <- 
swcpostdata %>%
  select(contains("Increase")) %>% 
  gather() %>% 
  filter(value %in% knowledge_post) %>% 
  nest(-key) %>% 
  mutate(tallies = purrr::map(data, ~tally_and_perc(.x, value)))  %>% 
  unnest(tallies) %>% 
  mutate(key = gsub("Increase", "", key))

# Plot before and after as two grouped bar plots, then combine.

tools_before <- 
   ggplot(pre_knowledge, 
         aes(x = key,
             y = `%`,
             fill = fct_relevel(value, 
                             knowledge_pre))) +
    geom_col(position = "dodge") +
    geom_text(aes(label=n), 
              size= 4,
              position=position_dodge(width=1)) +
    scale_x_discrete(labels = function(x) lapply(strwrap(x,
                                                         width = 10,
                                                         simplify = FALSE),
                                                 paste,
                                                 collapse = "\n")) +
    theme_classic() +
    xlab("") +
    ylab("% Respondents") +
    ggtitle("Knowledge before workshop") +
    theme(plot.title = element_text(hjust = 0.5)) +
    theme_classic(base_size = 14) +
    theme(legend.position = "bottom", 
          legend.title=element_blank()) + 
guides(fill = guide_legend(nrow = 2)) # wraps legend

tools_after <- 
   ggplot(post_knowledge, 
         aes(x = key,
             y = `%`,
             fill = fct_rev(fct_relevel(value, 
                             (knowledge_pre))))) +
    geom_col(position = "dodge") +
    geom_text(aes(label=n), 
              size= 4,
              position=position_dodge(width=1)) +
    scale_x_discrete(labels = function(x) lapply(strwrap(x,
                                                         width = 10,
                                                         simplify = FALSE),
                                                 paste,
                                                 collapse = "\n")) +
    theme_classic() +
    xlab("") +
    ylab("% Respondents") +
    ggtitle("Knowledge after workshop") +
    theme(plot.title = element_text(hjust = 0.5)) +
    theme_classic(base_size = 14) +
    theme(legend.position = "bottom", 
          legend.title=element_blank()) + 
guides(fill = guide_legend(nrow = 2)) # wraps legend
          
```


The following is a comparison of Software Carpentry Respondents' knowledge about the tools before compared to after the workshop.

```{r swc_prepost_knowledge}
# put the two plots together
library(gridExtra)
grid.arrange(tools_before, 
             tools_after,
             ncol = 1) 
```

# Respondent Ability to Perform Computing Tasks
Motivation is important, but being confident in your ability to complete specific computing tasks is an equally important goal of Software Carpentry. The grid below shows respondents' self-reported ability to complete tasks including: 

* Using pipes to connect shell commands 
* Writing a 'for loop' to automate tasks   
* Initializing a repository with git 
* Writing a function 
* Importing a library or package in R or Python 
* Writing a unit test in Python or R 
* Writing an SQL query 

It also provides their self-reported level of confidence in being able to complete the tasks above after completing the workshop.

```{r}
# Software Carpentry
# Code chunk for ability to perform various computing tasks
computing_pre <-
    c(
    "Yes",
    "No",
    "Maybe"
    )

computing_post <- 
  c("Confidence increased slightly", 
    "Confidence increased a bit", 
    "Confidence increased greatly", 
    "No change in confidence",
    "N/A - Not covered at workshop")

# Compute for all tools.

# Before the workshop
pre_computing <- 
swcpostdata %>%
  select(contains("Before")) %>% 
  gather() %>% 
  filter(value %in% computing_pre) %>% 
  nest(-key) %>% 
  mutate(tallies = purrr::map(data, ~tally_and_perc(.x, value))) %>% 
  unnest(tallies) %>% 
  mutate(key = gsub("Before", "", key))

# After the workshop
post_computing <- 
swcpostdata %>%
  select(contains("After")) %>% 
  gather() %>% 
  filter(value %in% computing_post) %>% 
  nest(-key) %>% 
  mutate(tallies = purrr::map(data, ~tally_and_perc(.x, value)))  %>% 
  unnest(tallies) %>% 
  mutate(key = gsub("After", "", key))

# Plot before and after as two grouped bar plots, then combine.

computing_before <- 
   ggplot(pre_computing, 
         aes(x = key,
             y = `%`,
             fill = fct_relevel(value, 
                             computing_pre))) +
    geom_col(position = "dodge") +
    geom_text(aes(label=n), 
              size= 4, 
              position=position_dodge(width=1)) +
    scale_x_discrete(labels = function(x) lapply(strwrap(x,
                                                         width = 10,
                                                         simplify = FALSE),
                                                 paste,
                                                 collapse = "\n")) +
    theme_classic() +
    xlab("") +
    ylab("% Respondents") +
    ggtitle("Respondent Ability Pre-Workshop") +
    theme(plot.title = element_text(hjust = 0.5)) +
    theme_classic(base_size = 14) +
    theme(legend.position = "bottom", 
          legend.title=element_blank()) 

computing_after <- 
   ggplot(post_computing, 
         aes(x = key,
             y = `%`,
             fill = fct_rev(fct_relevel(value, 
                             (computing_pre))))) +
    geom_col(position = "dodge") +
    geom_text(aes(label=n), 
              size= 4,
              position=position_dodge(width=1)) +
    scale_x_discrete(labels = function(x) lapply(strwrap(x,
                                                         width = 10,
                                                         simplify = FALSE),
                                                 paste,
                                                 collapse = "\n")) +
    theme_classic() +
    xlab("") +
    ylab("% Respondents") +
    ggtitle("Level of Confidence Post-Workshop") +
    theme(plot.title = element_text(hjust = 0.5)) +
    theme_classic(base_size = 14) +
    theme(legend.position = "bottom", 
          legend.title=element_blank()) + 
guides(fill = guide_legend(nrow = 2)) # wraps legend
          
```

```{r swc_prepost_confidence}
# Put the two plots together
library(gridExtra)
grid.arrange(computing_before, 
             computing_after,
             ncol = 1)
```

# Workshop Experience
```{r}
# In this section we will include:
# NPS (SWC/DC)
# Qualitative Analysis (SWC/DC)
```

```{r}
# NPS 
# Data Carpentry
net_promoter_score <- 
    dcpostdata$`LikelyToRecommend` %>%
    npc(breaks = list(0:64, 65:84, 85:100)) %>%
    data.frame(category = .) %>%
    filter(!is.na(category)) %>%
    count(category) %>%
    mutate("%" = (n / sum(n))*100)

kable(net_promoter_score, format = 'markdown', row.names = NA, col.names = c ("Promoter Score", "n", "%"))

percent_promoters <- net_promoter_score %>%
    filter(category == "Promoter") %>%
    pull(`%`) %>%
    round()
## Instead of showing the table, I want to use in-line text to say that 
## 77% of respondents are promoters using `r net_promoter_score[3]%` 
## but I believe that's not the way to do it.
```

`r percent_promoters`% of the respondants are promoters.



```{r}
# NPS 
# Software Carpentry
recommend = c("Strongly Disagree", "Disagree", "Neither Agree nor Disagree", "Agree", "Strongly Agree")

Recommend <- 
swcpostdata %>%
  select(Recommend) %>% 
  gather(col, 
         Recommend) %>% 
  tally_and_perc(Recommend, 
                 na.rm = TRUE) %>% 
  rename(Recommend = Recommend)

kable(Recommend, format = 'markdown', row.names = NA, col.names = c ("SWC Respondents Recommending Workshops", "n", "%"))

# How do I get the answer choices to show in the right order?
```

```{r}
# Software Carpentry
net_promoter_score <- 
    swcpostdata$`LikelyToRecommend` %>%
    npc(breaks = list(0:6.4, 6.5:8.4, 8.5:10)) %>%
    data.frame(category = .) %>%
    filter(!is.na(category)) %>%
    count(category) %>%
    mutate("%" = (n / sum(n))*100)
    kable(net_promoter_score, format = 'markdown', row.names = NA, col.names = c ("Promoter Score", "n", "%"))

# Instead of showing the table, I want to use in-line text to say that 
# 64% of respondents are promoters using `r net_promoter_score[3]%` 
# but I believe that's not the way to do it.
```


```{r}
# Qualitative Analysis (SWC/DC)
```

# Demographics
```{r}
# In this section we will include
# Workshop Location (DC): 
# Domain (SWC, DC)
# Position (SWC, DC)
# OS (DC)
# 1st time attending (SWC)
# Gender/Ethnicity (DC)
```

```{r}
# Data Carpentry learners are asked what country their workshop is held.
# Tally Data Carpentry's pre-workshop respondents by Country
dcpredata_country_tally <-
dcpredata %>%
  group_by(Country) %>%
  tally(sort = TRUE) %>%
  mutate(perc = round(100 * (n/sum(n)), 1)) %>% # add the % col
  filter(!is.na(Country)) %>%
  arrange(desc(n))
```

```{r dc_respondents_by_country}
# Plot Data Carpentry's respondents by Country
ggplot(dcpredata_country_tally,
       aes(reorder(Country, perc),
           perc)) +
  geom_bar(stat = "identity", fill = "maroon") +
  theme_classic() +
  xlab("") +
  ylab("Percentage of Respondents") +
  coord_flip() +
  ggtitle("Breakdown of Data Carpentry's Survey \nRespondents by Country") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_bw(base_size = 14)
#kable(data_country_tally, format='markdown')
```

In Software Carpentry's pre-workshop survey, respondents are asked whether or not their workshop takes place in the United States.

```{r}
# Tally Software Carpentry's pre-workshop respondents by Country
swcpredata_country_tally <-
swcpredata %>%
  group_by(USWorkshop) %>%
  tally(sort = TRUE) %>%
  mutate(perc = round(100 * (n/sum(n)), 1)) %>% # add the % col
  filter(!is.na(USWorkshop)) %>%
  arrange(desc(n))
kable(swcpredata_country_tally, format='markdown', col.names = c("Software Carpentry Workshops in US", "n", "%"))

# This doesn't equal 100%
```

```{r}
# Domain 
# Tally Data Carpentry's pre-workshop respondents by Discipline
# Responses are in columns 'Discipline' through 'Column13'
dcdiscipline <-
 dcpredata %>%
 select(Discipline:Column13) %>%
 gather(col, dcdiscipline) %>%
 group_by(dcdiscipline) %>%
 tally_and_perc(dcdiscipline, na.rm = TRUE) %>%
 filter(!is.na(dcdiscipline)) %>%
 arrange(desc(n)) %>%
 rename(`Discipline` = dcdiscipline)

kable(dcdiscipline, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry's Respondents by Discipline", "n", "%"))
```

```{r}
# Tally Software Carpentry's pre-workshop respondents by Discipline
# Responses are in columns 'Domain' through 'Column61'
swcdiscipline <-
 swcpredata %>%
 select(Domain:Column61) %>%
 gather(col, swcdiscipline) %>%
 group_by(swcdiscipline) %>%
 tally_and_perc(swcdiscipline,na.rm = TRUE) %>%
 filter(!is.na(swcdiscipline)) %>%
 arrange(desc(n)) %>%
 rename(`Domain` = swcdiscipline)

kable(swcdiscipline, format = 'markdown', row.names = NA, col.names = c ("Software Carpentry's Respondents by Discipline", "n", "%"))
```


```{r}
# Position/Status
# Data Carpentry Respondents by Status
# Responses are in columns 'Status' through 'Column22'
ordered_status = c("Undergraduate Student", "Graduate Student", "Postdoctoral Researcher", "Faculty", "Industry Employee", "Government Employee", "Research Staff", "Management/Administrator", "Retired/Not Employed", "Other (please specify)")

dcpredata_status_tally <-
 dcpredata %>%
 select(Status:Column22) %>%
 gather(col, dcpredata_status_tally) %>%
 group_by(dcpredata_status_tally) %>%
 tally_and_perc(dcpredata_status_tally, na.rm = TRUE) %>%
 filter(!is.na(dcpredata_status_tally)) %>%
 arrange(desc(n)) %>%
 rename(`Status` = dcpredata_status_tally)

kable(dcpredata_status_tally, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry's Respondents by Position", "n", "%"))
```

```{r dc_learners_status}
# Data Carpentry plot of learners by position/status
# This plot is not working
ggplot(dcpredata_status_tally, 
       aes(Status,
           y = `%`,
           n)) +
  geom_bar(stat = "identity", 
           fill = "darkcyan") +
  geom_text(aes(label = n), 
            size= 4,
            nudge_y = 3) + ## This moves the numbers up a bit so they're easier to read. 
  scale_x_discrete(labels = function(x) lapply(strwrap(x, 
                                                       width = 10, 
                                                       simplify = FALSE), 
                                               paste, collapse="\n")) +
  theme_classic() +
  xlab("Position") +
  ylab("% Respondents") +
  ggtitle("Data Carpentry Respondents by Position/Status") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_classic(base_size = 14) 
```


```{r }
# Software Carpentry Respondents by Position/Status
ordered_status <- c(    
    "Undergraduate Student",
    "Graduate Student",
    "Post-doctoral researcher",
    "Faculty",
    "Research staff (including research programmer)",
    "Support staff (including technical support)",
    "Librarian/archivist",
    "Commercial software developer",
    "Other (please specify)"
  )

swcpredata_status_tally <- 
swcpredata %>% 
  mutate(Status_ord = fct_relevel(Status, 
                                  ordered_status)) %>% 
  tally_and_perc(Status_ord, na.rm = TRUE) 
```

```{r swc_learners_status}
# Plot for Software Carpentry Respondents by Position/Status
ggplot(swcpredata_status_tally, 
       aes(Status_ord,
           y = `%`,
           n)) +
  geom_bar(stat = "identity", 
           fill = "darkcyan") +
  geom_text(aes(label = n), 
            size= 4,
            nudge_y = 3) + ## This moves the numbers up a bit so they're easier to read. 
  scale_x_discrete(labels = function(x) lapply(strwrap(x, 
                                                       width = 10, 
                                                       simplify = FALSE), 
                                               paste, collapse="\n")) +
  theme_classic() +
  xlab("Status") +
  ylab("% Respondents") +
  ggtitle("Software Carpentry Respondents by Position/Status") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_classic(base_size = 14) 
```


```{r}
# OS 
# Data Carpentry
OS <- 
dcpredata %>%
  select(OS) %>% 
  gather(col, 
         OS) %>% 
  tally_and_perc(OS, 
                 na.rm = TRUE) %>% 
  arrange(desc(n)) %>% 
  rename(`Operating System` = OS)

# Table
kable(OS, format = 'markdown', row.names = NA, col.names = c ("OS Respondents Use in Data Carpentry Workshops", "n", "%"))
```

```{r}
# 1st time attending 
# Software Carpentry: Will this be your first time attending a SWC workshop (as a learner)?
firsttime = c("Yes", "No")
firsttime = factor(firsttime)

swcpredata$FirstTime = factor(swcpredata$FirstTime, levels = firsttime)

swcpredata_gender_tally <-
  swcpredata %>%
  group_by(FirstTime) %>%
  tally() %>%
  filter(!is.na(FirstTime)) %>%
  mutate(perc = round(n/sum(n) * 100, 0))

kable(swcpredata_gender_tally, format = 'markdown', row.names = NA, col.names = c ("Software Carpentry 1st Time Learners", "n", "%"))
```

```{r}
# Gender Identity 
# Data Carpentry
# With what gender do you most identify?
gender = c("Female", "Male", "Transgender female", "Transgender male", "Gender variant/non-conforming", "Prefer not to answer", "Not listed (please specify")
gender = factor(gender)

dcpredata$GenderIdentity = factor(dcpredata$GenderIdentity, levels = gender)

dcpredata_gender_tally <-
  dcpredata %>%
  group_by(GenderIdentity) %>%
  tally() %>%
  filter(!is.na(GenderIdentity)) %>%
  mutate(perc = round(n/sum(n) * 100, 0))

kable(dcpredata_gender_tally, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry's U.S. Respondents' Gender Identity", "n", "%"))
```
```{r}
# Software Carpentry
# With what gender do you most identify?
gender = c("Female", "Male", "Other", "Prefer not to say")
gender = factor(gender)

swcpredata$Gender = factor(swcpredata$Gender, levels = gender)

swcpredata_gender_tally <-
  swcpredata %>%
  group_by(Gender) %>%
  tally() %>%
  filter(!is.na(Gender)) %>%
  mutate(perc = round(n/sum(n) * 100, 0))

kable(dcpredata_gender_tally, format = 'markdown', row.names = NA, col.names = c ("Software Carpentry's U.S. Respondents' Gender Identity", "n", "%"))

```

```{r}
# Data Carpentry: Race/Ethnic Identity
# Responses are in columns 'RaceEthnicIdentity' through 'Column49'
dcpredata_race_tally <-
 dcpredata %>%
 select(RaceEthnicIdentity:Column49) %>%
 gather(col, dcpredata_race_tally) %>%
 group_by(dcpredata_race_tally) %>%
 tally_and_perc(dcpredata_race_tally, na.rm = TRUE) %>%
 filter(!is.na(dcpredata_race_tally)) %>%
 arrange(desc(n)) %>%
 rename(`RaceEthnicIdentity` = dcpredata_race_tally)

kable(dcpredata_race_tally, format = 'markdown', row.names = NA, col.names = c ("Data Carpentry's U.S. Respondents Racial/Ethnic Identity", "n", "%"))
```

```{r}
# Software Carpentry: Race/Ethnic Identity
race = c("American Indian or Alaskan Native", "Asian / Pacific Islander", "Black or African American", "Hispanic or Latino", "Native Hawaiian or Other Pacific Islander", "White / Caucasian", "Prefer not to say", "Multiple ethnicity / Other (please specify)")
race = factor(race)

swcpostdata$Race = factor(swcpostdata$Race, levels = race)

swcpostdata_race_tally <-
  swcpostdata %>%
  group_by(Race) %>%
  tally() %>%
  filter(!is.na(Race)) %>%
  mutate(perc = round(n/sum(n) * 100, 0))

kable(swcpostdata_race_tally, format = 'markdown', row.names = NA, col.names = c ("Software Carpentry's U.S. Respondents' Racial/Ethnic Identity", "n", "%"))

# % adds up to 101, is this right?
```

# Summary







 
